import{D as v,_ as L}from"./DialogBox.c4d55d6b.js";import{y as C,E as P,r as M,o as h,c as N,p as s,w as r,R as I,b as D,bl as E,ba as R,D as y,P as b,m as n,b5 as w,x as u}from"./index.84400ea8.js";import{o as O}from"./main.9984b416.js";import{d as i,V as B,c as p}from"./VRow.5bc57025.js";import{V as m}from"./VAutocomplete.f4bce551.js";import"./VDialog.e12e96f6.js";const{mapGetters:G,mapActions:T,mapState:q}=P("dashboard"),U={components:{DialogBox:v,DashboardNotify:L,VueDatePicker:O},data(){return{picker:"",isBox:!1,headers:[{title:"Destination Country",align:"start",key:"Pais_Destino"},{title:"MccMnc",align:"start",key:"MccMnc"},{title:"Operator",align:"start",key:"Operadora"},{title:"Submited",align:"start",key:"Enviados"},{title:"Notified",align:"start",key:"Notificados"},{title:"Wrong",align:"start",key:"Errores"},{title:"Forwarded",align:"start",key:"Reenviados"},{title:"Delivered",align:"start",key:"Entregados"}],countryModel:null,providerModel:null,customerModel:null,typeRouteModel:null,mccmncModel:null,serverUrl:window.configData.APP_BASE_URL}},computed:{...G(["GetReportMccMncList","IsLoading","GetReportMccMnc"]),getReportData:function(){var t,e,l;return(t=this.GetReportMccMncList)!=null&&t.data?(l=(e=this.GetReportMccMncList)==null?void 0:e.data)==null?void 0:l.map(d=>{let c=d;return c.OutText=decodeURIComponent(d==null?void 0:d.OutText),c}):[]},getCountries:function(){var t,e;return(e=(t=this.GetReportMccMncList)==null?void 0:t.countryList)==null?void 0:e.map(l=>`${l.state}[${l.code}]`).splice(0,50)},getProviders:function(){var t,e;return(e=(t=this.GetReportMccMncList)==null?void 0:t.providerList)==null?void 0:e.map(l=>`${l.NOMBRE}[${l.ID_PROVEEDOR}]`).splice(0,50)},getCustomers:function(){var t,e;return(e=(t=this.GetReportMccMncList)==null?void 0:t.customerList)==null?void 0:e.map(l=>`${l.EMPRESA}[${l.ID_CLIENTE}]`).splice(0,50)},getTypeRoute:function(){var e,l;const t=((e=this.GetReportMccMncList)==null?void 0:e.typeRoute)||{};return(l=Object.keys(t))==null?void 0:l.map(d=>`${t[d]} [${d.substr(1,1)}]`)},getMccMnc:function(){var t,e;return(e=(t=this.GetReportMccMnc)==null?void 0:t.map(l=>`${l.OPERATOR} [${l.MCC}${l.MNC}]`).sort())!=null?e:[]},periodPicker:function(){return this.filterPeriod=="Month"}},mounted(){const t=new Date,e=new Date(new Date().setDate(t.getDate()-1));this.picker=[e,t],this.fetchReportMccMncListData({cFechaInicio:e,cFechaFin:t,cPaises:"",iIDCliente:"",iIDProveedor:"",iIDTipoRuta:-1,cMccMnc:""})},methods:{...T(["fetchReportMccMncListData","fetchMccMncData"]),searchResult(){this.fetchReportMccMncListData({cFechaInicio:this.picker[0],cFechaFin:this.picker[1],cPaises:this.getNumList(this.countryModel),iIDCliente:this.getNumList(this.customerModel),iIDProveedor:this.getNumList(this.providerModel),iIDTipoRuta:this.getNumList(this.typeRouteModel),cMccMnc:this.getMccMncLists(this.mccmncModel)})},getMccMncLists(t){const e=JSON.parse(JSON.stringify(t));return e?e.map(l=>parseInt(l.match(/\d+/)[0])).join(","):""},Reset(){this.countryModel=null,this.providerModel=null,this.customerModel=null,this.typeRouteModel=null,this.mccmncModel=null;const t=new Date,e=new Date(new Date().setDate(t.getDate()-1));this.picker=[e,t]},getNumList(t){return Array.isArray(t)?t.map(e=>parseInt(e.match(/\d+/)[0])).join(","):t}},watch:{countryModel:function(t){const e=this.getNumList(t);!e||this.fetchMccMncData({codes:e})}}},x={class:"text-left"};function S(t,e,l,d,c,a){const V=M("VueDatePicker"),k=M("v-data-table"),_=M("DialogBox");return h(),N("div",null,[s(p,{class:"match-height"},{default:r(()=>[s(i,{cols:"12",md:"12",lg:"12"},{default:r(()=>[s(B,{class:"text-center pb-4",title:"Search Reports for MccMnc"},{default:r(()=>[s(I,{class:"pb-1"}),t.IsLoading?(h(),D(E,{key:0,size:50,color:"primary",indeterminate:""})):R("",!0),t.IsLoading?R("",!0):(h(),D(k,{key:1,headers:c.headers,items:a.getReportData,"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1 px-4 py-2",style:{"min-height":"450px"}},{top:r(()=>[s(p,{class:"align-center"},{default:r(()=>[s(i,{cols:"12",md:"4",sm:"6"},{default:r(()=>[s(V,{modelValue:c.picker,"onUpdate:modelValue":e[0]||(e[0]=o=>c.picker=o),range:"","enable-time-picker":!1,"month-picker":a.periodPicker},null,8,["modelValue","month-picker"])]),_:1}),s(i,{cols:"12",md:"4",sm:"6"},{default:r(()=>[s(m,{modelValue:c.countryModel,"onUpdate:modelValue":e[1]||(e[1]=o=>c.countryModel=o),label:"Countries",items:a.getCountries,multiple:""},null,8,["modelValue","items"])]),_:1}),s(i,{cols:"12",md:"4",sm:"6"},{default:r(()=>[s(m,{label:"Providers",items:a.getProviders,modelValue:c.providerModel,"onUpdate:modelValue":e[2]||(e[2]=o=>c.providerModel=o),multiple:""},null,8,["items","modelValue"])]),_:1})]),_:1}),s(p,{class:"align-center"},{default:r(()=>[s(i,{cols:"12",md:"4",sm:"6"},{default:r(()=>[s(m,{modelValue:c.customerModel,"onUpdate:modelValue":e[3]||(e[3]=o=>c.customerModel=o),label:"Customers",items:a.getCustomers,multiple:""},null,8,["modelValue","items"])]),_:1}),s(i,{cols:"12",md:"4",sm:"6"},{default:r(()=>[s(m,{modelValue:c.mccmncModel,"onUpdate:modelValue":e[4]||(e[4]=o=>c.mccmncModel=o),label:"MccMnc",items:a.getMccMnc,multiple:"",disabled:!a.getMccMnc.length},null,8,["modelValue","items","disabled"])]),_:1}),s(i,{cols:"12",md:"4",sm:"6"},{default:r(()=>[s(m,{label:"Type of route",items:a.getTypeRoute,modelValue:c.typeRouteModel,"onUpdate:modelValue":e[5]||(e[5]=o=>c.typeRouteModel=o),multiple:""},null,8,["items","modelValue"])]),_:1})]),_:1}),s(p,null,{default:r(()=>[s(i,{cols:"12",md:"12",sm:"12",class:"text-right"},{default:r(()=>[s(y,{onClick:a.searchResult,color:"info",dark:"",class:"btn border",size:"small","prepend-icon":"tabler-search"},{default:r(()=>[b(" Search ")]),_:1},8,["onClick"]),s(y,{color:"secondary",dark:"",class:"btn border ml-4",size:"small","prepend-icon":"tabler-refresh",onClick:a.Reset},{default:r(()=>[b(" Reset ")]),_:1},8,["onClick"])]),_:1}),s(i,{cols:"12",md:"3",sm:"12"})]),_:1})]),item:r(({item:o,index:A})=>{var f,g;return[n("tr",x,[n("td",null,[s(w,{"max-width":40,src:`${c.serverUrl}/flags/${o.selectable.Pais_Destino}.png`},null,8,["src"]),n("span",null,u(o.selectable.state),1)]),n("td",null,u((f=o.selectable)==null?void 0:f.MccMnc),1),n("td",null,u((g=o.selectable)==null?void 0:g.Operadora),1),n("td",null,u(o.selectable.Enviados),1),n("td",null,u(o.selectable.Notificados),1),n("td",null,u(o.selectable.Errores),1),n("td",null,u(o.selectable.Reenviados),1),n("td",null,u(o.selectable.Entregados),1)])]}),_:1},8,["headers","items"]))]),_:1})]),_:1})]),_:1}),s(_,{isVisable:c.isBox},null,8,["isVisable"])])}const K=C(U,[["render",S]]);export{K as default};
