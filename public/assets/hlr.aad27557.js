import{D as P,_ as b}from"./DialogBox.c4d55d6b.js";import{y as H,E as w,r as p,o as h,c as f,p as a,w as l,R as _,b as R,bl as T,bR as B,D,P as m,bM as v,m as n,F as C,a as M,x as u}from"./index.84400ea8.js";import{o as E}from"./main.9984b416.js";import{n as L}from"./index.c0fab4f2.js";import{d,V as S,c as g}from"./VRow.5bc57025.js";import"./VDialog.e12e96f6.js";const{mapGetters:A,mapActions:N,mapState:Q}=w("dashboard"),z={components:{DialogBox:P,DashboardNotify:b,VueDatePicker:E},data(){return{isBox:!1,filterPeriod:"Day",picker:"",headers:[{title:"Period",align:"center",key:"Period"},{title:"Total HLR",align:"center",key:"TotalHlr"},{title:"Total EUR",align:"center",key:"TotalEur"}],filterHost:""}},computed:{...A(["GetHLR","IsLoading"]),getAck:function(){var e,t,r;return(r=(t=(e=this.GetHLR)==null?void 0:e.tHlr)==null?void 0:t.tHlrRow)!=null?r:[]},periodPicker:function(){return this.filterPeriod=="Month"}},mounted(){const e=new Date,t=new Date(new Date().setDate(e.getDate()-7));this.picker=[t,e],this.fetchHlrData({period:this.filterPeriod,range:`${this.formatDate(t)}#${this.formatDate(e)}`})},methods:{...N(["fetchHlrData"]),formatDate(e){var t=new Date(e),r=""+(t.getMonth()+1),o=""+t.getDate(),i=t.getFullYear();return r.length<2&&(r="0"+r),o.length<2&&(o="0"+o),[o,r,i].join("-")},formatMonth(e){var t=new Date(e);if(t!="Invalid Date"){let r=""+(t.getMonth()+1),o=t.getFullYear();return r.length<2&&(r="0"+r),[r,o].join("-")}else{let r=""+((e==null?void 0:e.month)+1),o=e==null?void 0:e.year;return r.length<2&&(r="0"+r),[r,o].join("-")}},ackSearch(){if(!this.picker){L("Please select the dater range","error");return}let e=this.picker[0],t=this.picker[1];this.filterPeriod=="Day"?this.fetchHlrData({period:this.filterPeriod,range:`${this.formatDate(e)}#${this.formatDate(t)}`,host:this.filterHost}):this.fetchHlrData({period:this.filterPeriod,range:`${this.formatMonth(e)}#${this.formatMonth(t)}`,host:this.filterHost})},Reset(){this.filterHost="",this.filterPeriod="Day";const e=new Date,t=new Date(new Date().setDate(e.getDate()-7));this.picker=[t,e]}},watch:{}},F={key:1,class:"px-4 py-4",style:{"min-height":"400px"}},j=n("thead",{class:"text-center"},[n("tr",null,[n("th",{scope:"col",class:"text-center"},"Period"),n("th",{scope:"col",class:"text-center"},"TotalHlr"),n("th",{scope:"col",class:"text-center"},"TotalEur")])],-1),G={class:"text-center"};function I(e,t,r,o,i,c){const k=p("VueDatePicker"),y=p("download-excel"),x=p("DialogBox");return h(),f("div",null,[a(g,{class:"match-height"},{default:l(()=>[a(d,{cols:"12",md:"12",lg:"12"},{default:l(()=>[a(S,{class:"text-center py-4",title:"HLR Data"},{default:l(()=>[a(_),e.IsLoading?(h(),R(T,{key:0,size:50,color:"primary",indeterminate:""})):(h(),f("div",F,[a(g,{class:"align-center"},{default:l(()=>[a(d,{cols:"12",md:"4",sm:"6"},{default:l(()=>[a(B,{label:"Period",items:["Day","Month"],modelValue:i.filterPeriod,"onUpdate:modelValue":t[0]||(t[0]=s=>i.filterPeriod=s)},null,8,["modelValue"])]),_:1}),a(d,{cols:"12",md:"4",sm:"6"},{default:l(()=>[a(k,{modelValue:i.picker,"onUpdate:modelValue":t[1]||(t[1]=s=>i.picker=s),range:"","enable-time-picker":!1,"month-picker":c.periodPicker},null,8,["modelValue","month-picker"])]),_:1}),a(d,{cols:"12",md:"4",sm:"6",class:"text-center"},{default:l(()=>[a(D,{onClick:c.ackSearch,color:"info",dark:"",class:"btn border",size:"small","prepend-icon":"tabler-search"},{default:l(()=>[m(" Search ")]),_:1},8,["onClick"]),a(D,{color:"secondary",dark:"",class:"btn border ml-4",size:"small","prepend-icon":"tabler-refresh",onClick:c.Reset},{default:l(()=>[m(" Reset ")]),_:1},8,["onClick"]),a(y,{data:c.getAck,class:"d-inline"},{default:l(()=>[a(D,{color:"success",dark:"",class:"btn border ml-4",size:"small","prepend-icon":"mdi-file-excel"},{default:l(()=>[m(" Excel ")]),_:1})]),_:1},8,["data"])]),_:1}),a(d,{cols:"12",md:"3",sm:"12"})]),_:1}),a(v,{class:"text-no-wrap text-center py-4"},{default:l(()=>[j,n("tbody",G,[(h(!0),f(C,null,M(c.getAck,(s,V)=>(h(),f("tr",{style:{height:"3.75rem"},key:V},[n("td",null,u(s==null?void 0:s.Period),1),n("td",null,u(s==null?void 0:s.TotalHlr),1),n("td",null,u(s==null?void 0:s.TotalEur),1)]))),128))])]),_:1}),a(_),a(g,{class:"align-left pt-4"},{default:l(()=>[a(d,{cols:"12",md:"12",sm:"12",class:"text-right pr-4"},{default:l(()=>[m(" Total Rows: "+u(c.getAck.length),1)]),_:1})]),_:1})]))]),_:1})]),_:1})]),_:1}),a(x,{isVisable:i.isBox},null,8,["isVisable"])])}const W=H(z,[["render",I]]);export{W as default};
