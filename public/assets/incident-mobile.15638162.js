import{D as I,_ as V}from"./DialogBox.c4d55d6b.js";import{y,E as C,r as m,o as p,c as N,p as t,w as o,R as v,b as M,bl as P,ba as D,U as b,D as h,P as _,m as a,x as n,b5 as x}from"./index.84400ea8.js";import{o as F}from"./main.9984b416.js";import{d as c,V as w,c as g}from"./VRow.5bc57025.js";import"./VDialog.e12e96f6.js";const{mapGetters:B,mapActions:U,mapState:j}=C("dashboard"),L={components:{DialogBox:I,DashboardNotify:V,VueDatePicker:F},data(){return{picker:"",isBox:!1,headers:[{title:"Mobile",align:"start",key:"Movil"},{title:"Destination Country",align:"start",key:"Pais_Destino"},{title:"Route",align:"start",key:"Ruta"},{title:"Route Real",align:"start",key:"Ruta_Real"},{title:"MCC",align:"start",key:"MCC"},{title:"MNC",align:"start",key:"MNC"},{title:"HLR",align:"start",key:"HLR"},{title:"Client Name",align:"start",key:"NombreCliente"},{title:"Sender Text",align:"start",key:"Texto_Remitente"},{title:"Departure Date",align:"start",key:"Fecha_Salida"},{title:"OperatorDeliveryDate",align:"start",key:"Fecha_EntregaOperadora"},{title:"Notification",align:"start",key:"Fecha_Notificacion"},{title:"Ruta MsgID",align:"start",key:"Ruta_MsgID"}],phoneNumberModel:null,cRutaMsgIDModel:null,msgIdModel:null,serverUrl:window.configData.APP_BASE_URL}},computed:{...B(["GetMobileIncident","IsLoading","GetReportMccMnc"]),getReportData:function(){var i,l,u;return(i=this.GetMobileIncident)!=null&&i.data?(u=(l=this.GetMobileIncident)==null?void 0:l.data)==null?void 0:u.filter(r=>r.Pais_Destino).map(r=>{let s=r;return s.OutText=decodeURIComponent(r==null?void 0:r.OutText),s}):[]},periodPicker:function(){return this.filterPeriod=="Month"}},mounted(){const i=new Date,l=new Date(new Date().setDate(i.getDate()-30));this.picker=[l,i],this.fetchMobileIncidentData({cFechaInicio:l,cFechaFin:i,cMovil:"",cRutaMsgID:"",cMsgID:"",iPagina:""})},methods:{...U(["fetchMobileIncidentData","fetchMccMncData"]),searchResult(){this.fetchMobileIncidentData({cFechaInicio:this.picker[0],cFechaFin:this.picker[1],cMovil:this.phoneNumberModel,cMsgID:this.msgIdModel,cRutaMsgID:this.cRutaMsgIDModel})},Reset(){this.phoneNumberModel=null,this.cRutaMsgIDModel=null,this.customerModel=null;const i=new Date,l=new Date(new Date().setDate(i.getDate()-30));this.picker=[l,i]}}},S={class:"text-left"};function T(i,l,u,r,s,d){const f=m("VueDatePicker"),k=m("v-data-table"),R=m("DialogBox");return p(),N("div",null,[t(g,{class:"match-height"},{default:o(()=>[t(c,{cols:"12",md:"12",lg:"12"},{default:o(()=>[t(w,{class:"text-center pb-4",title:"Incidents Mobile"},{default:o(()=>[t(v,{class:"pb-1"}),i.IsLoading?(p(),M(P,{key:0,size:50,color:"primary",indeterminate:""})):D("",!0),i.IsLoading?D("",!0):(p(),M(k,{key:1,headers:s.headers,items:d.getReportData,"sort-by":[{key:"calories",order:"asc"}],class:"elevation-1 px-4 py-2",style:{"min-height":"450px","font-size":"10pt"}},{top:o(()=>[t(g,{class:"align-center"},{default:o(()=>[t(c,{cols:"12",md:"4",sm:"6"},{default:o(()=>[t(b,{label:"Mobile Phone Number",modelValue:s.phoneNumberModel,"onUpdate:modelValue":l[0]||(l[0]=e=>s.phoneNumberModel=e)},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",md:"4",sm:"6"},{default:o(()=>[t(b,{label:"MsgID",modelValue:s.msgIdModel,"onUpdate:modelValue":l[1]||(l[1]=e=>s.msgIdModel=e)},null,8,["modelValue"])]),_:1}),t(c,{cols:"12",md:"4",sm:"6"},{default:o(()=>[t(b,{label:"Providers",modelValue:s.cRutaMsgIDModel,"onUpdate:modelValue":l[2]||(l[2]=e=>s.cRutaMsgIDModel=e)},null,8,["modelValue"])]),_:1})]),_:1}),t(g,{class:"mb-4 pb-4"},{default:o(()=>[t(c,{cols:"12",md:"4",sm:"6"},{default:o(()=>[t(f,{modelValue:s.picker,"onUpdate:modelValue":l[3]||(l[3]=e=>s.picker=e),range:"","enable-time-picker":!1,"month-picker":d.periodPicker},null,8,["modelValue","month-picker"])]),_:1}),t(c,{cols:"12",md:"4",sm:"6"}),t(c,{cols:"12",md:"4",sm:"6",class:"text-right"},{default:o(()=>[t(h,{onClick:d.searchResult,color:"info",dark:"",class:"btn border",size:"small","prepend-icon":"tabler-search"},{default:o(()=>[_(" Search ")]),_:1},8,["onClick"]),t(h,{color:"secondary",dark:"",class:"btn border ml-4",size:"small","prepend-icon":"tabler-refresh",onClick:d.Reset},{default:o(()=>[_(" Reset ")]),_:1},8,["onClick"])]),_:1})]),_:1})]),item:o(({item:e,index:E})=>[a("tr",S,[a("td",null,n(e.selectable.Movil),1),a("td",null,[t(x,{"max-width":40,src:`${s.serverUrl}/flags/${e.selectable.Pais_Destino}.png`},null,8,["src"]),a("span",null,n(e.selectable.state),1)]),a("td",null,n(e.selectable.Ruta),1),a("td",null,n(e.selectable.Ruta_Real),1),a("td",null,n(e.selectable.MCC),1),a("td",null,n(e.selectable.MNC),1),a("td",null,n(e.selectable.HLR),1),a("td",null,n(e.selectable.NombreCliente),1),a("td",null,n(e.selectable.Texto_Remitente),1),a("td",null,n(e.selectable.Fecha_Salida),1),a("td",null,n(e.selectable.Fecha_EntregaOperadora),1),a("td",null,n(e.selectable.Fecha_Notificacion),1),a("td",null,n(e.selectable.Ruta_MsgID),1)])]),_:1},8,["headers","items"]))]),_:1})]),_:1})]),_:1}),t(R,{isVisable:s.isBox},null,8,["isVisable"])])}const q=y(L,[["render",T]]);export{q as default};
